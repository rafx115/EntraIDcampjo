
# AADSTS500021: Access to '{tenant}' tenant is denied. AADSTS500021 indicates that the tenant restriction feature is configured and that the user is trying to access a tenant that isn't in the list of allowed tenants specified in the headerRestrict-Access-To-Tenant. For more information, seeUse tenant restrictions to manage access to SaaS cloud applications.


## Troubleshooting Steps
When encountering the error code AADSTS500021 with the description "Access to '{tenant}' tenant is denied", it indicates that the user is attempting to access a tenant that is not in the allowed list of tenants specified in the headerRestrict-Access-To-Tenant. Below is a detailed troubleshooting guide to address this issue:

### Initial Diagnostic Steps:
1. **Confirm the Error Code:** Ensure that the error code displayed is indeed AADSTS500021.
2. **Collect Tenant Information:** Identify the specific tenant that is being denied access.
3. **Check Tenant Restriction Configuration:** Verify the configuration of tenant restrictions set up for the application.

### Common Issues:
Common causes of this error include:
- Missing or incorrect configuration of tenant restrictions.
- User attempting to access a tenant that is not in the allowed list.
- Issues with the headerRestrict-Access-To-Tenant configuration.

### Step-by-Step Resolution Strategies:
1. **Access Tenant Configuration Settings:**
   - As an administrator, access the Azure portal and navigate to the application's settings.
   - Locate the tenant restriction configuration section.

2. **Update Allowed Tenants List:**
   - Add the tenant that the user is trying to access to the list of allowed tenants.
   - Specify the correct tenant ID in the configuration to ensure access.

3. **Review Headers Configuration:**
   - Check the headerRestrict-Access-To-Tenant setting for accuracy.
   - Ensure that the header is correctly configured to restrict or allow access to specific tenants.

4. **Test Access:**
   - Have the user attempt to access the application again after making the necessary changes.
   - Verify if the error persists or if the access has been successfully granted.

### Additional Notes or Considerations:
- It is important to review the tenant restriction settings periodically to ensure they are up-to-date.
- Communicate with the user attempting access to inform them of any changes made to the tenant restriction configurations.

### Documentation for Guidance:
- Microsoft Azure Active Directory documentation provides detailed information on managing tenant restrictions. You may refer to the following link for specific guidance:

[Use tenant restrictions to manage access to SaaS cloud applications](https://docs.microsoft.com/en-us/azure/active-directory/develop/restricting-tenant-access) 

By following these troubleshooting steps and resolution strategies, you should be able to address the AADSTS500021 error related to denied access to a specific tenant.