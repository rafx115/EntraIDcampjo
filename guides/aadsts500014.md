
# AADSTS500014: InvalidResourceServicePrincipalDisabled - The service principal for resource '{identifier}' is disabled. This indicates that a subscription within the tenant has lapsed, or that an administrator for this tenant has disabled the application's service principal, preventing tokens from being issued for it. For more information, seeDisable user sign-in for application.


## Troubleshooting Steps
### Troubleshooting Guide for Error Code AADSTS500014

**Error Description:**  
The error code AADSTS500014 indicates that the service principal for a specific resource identifier is disabled. This usually happens when a subscription has lapsed, or an administrator has disabled the application's service principal, preventing the issuance of tokens.

---

#### Initial Diagnostic Steps

1. **Identify the Application:** 
   - Review the error message to determine which resource (application) identifier is causing the issue.
   
2. **Check Tenant Status:**
   - Verify if the tenant has any lapsed subscriptions or issues related to billing.

3. **Review Current Sign-in Activity:**
   - Check Azure Active Directory (AAD) sign-in logs to see if any actions or errors were recorded prior to the AADSTS500014 error.

4. **Access the Azure Portal:**
   - Log in to the Azure portal (portal.azure.com) as an administrator.

---

#### Common Issues that Cause this Error

1. **Disabled Service Principal:**
   - The service principal representing the application is disabled by an administrator in Azure Active Directory.

2. **Lapsed Subscription:**
   - The Azure subscription associated with the tenant has expired, which can lead to services being disabled.

3. **Application Configuration:**
   - The application's permission settings or manifest might have been altered in a way that disables its access.

4. **Conditional Access Policies:**
   - Conditional access policies may restrict access based on certain conditions, although this typically results in different errors.

---

#### Step-by-Step Resolution Strategies

1. **Check if the Service Principal is Disabled:**
   - Navigate to the Azure Active Directory in the Azure portal.
   - Go to "App registrations."
   - Click on "All applications," then search for the application identified in the error.
   - Check if the application is disabled.
   - To enable it, click on the application and toggle the "Enabled for users to sign in" setting.

2. **Verify Subscription Status:**
   - Go to the "Subscriptions" page in the Azure portal.
   - Ensure that all relevant subscriptions are active and not expired.
   - If a subscription is lapsed, follow the billing instructions to renew it.

3. **Review Application Permissions:**
   - Under the application’s "API permissions," ensure that the necessary permissions are correctly granted.
   - If changes are necessary, update the permissions and request admin consent if required.

4. **Check for Conditional Access Policies:**
   - Review any conditional access policies in Azure AD that might be affecting user access to the application.

5. **Test Access after Changes:**
   - After making changes, attempt to sign in to the application again to determine if the issue is resolved.

---

#### Additional Notes or Considerations

- **Permissions Required:** You may need admin access to make changes to service principals or subscriptions.
- **Monitoring:** After resolving the issue, consider setting up alerts or monitoring for future anomalies with service principals.

---

#### Documentation for Guidance

1. [Azure AD App Registration Documentation](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app)
2. [Manage Azure AD Application Sign-in (Service Principal)](https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-manage-apps)
3. [Azure Active Directory Subscriptions](https://docs.microsoft.com/en-us/azure/active-directory/enterprise-users/groups/groups-assign-azure-subscriptions)

**Note:** Always verify that the links provided are up-to-date by testing them directly in a web browser.

---

#### Advice for Data Collection

- Collect logs from the Azure portal, including sign-in logs and audit logs, that can provide additional insights into user behavior and service principal status.
- Document any changes made during the troubleshooting process to ensure continuity and ease in future troubleshooting efforts.

By following this guide, you should be able to effectively diagnose and resolve the AADSTS500014 error.