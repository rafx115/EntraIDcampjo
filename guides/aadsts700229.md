# AADSTS700229: ForbiddenTokenType- Only app-only tokens can be used as Federated Identity Credentials for Microsoft Entra issuer. Use an app-only access token (generated during a client credentials flow) instead of a user-delegated access token (representing a request coming from a user context).


## Troubleshooting Steps
### Troubleshooting Guide: AADSTS700229 Error Code

#### Initial Diagnostic Steps:
1. **Review the Error Message:** Understand the specific error message provided - ForbiddenTokenType- Only app-only tokens can be used as Federated Identity Credentials for Microsoft Entra issuer.
2. **Check Token Type:** Determine if you are using a user-delegated access token instead of an app-only access token.
3. **Verify Issuer:** Confirm that the Federated Identity Credentials for Microsoft Entra issuer is set up correctly.
4. **Check Token Generation Method:** Ensure you are using the appropriate token generation flow.

#### Common Issues:
- Using a user-delegated access token instead of an app-only access token.
- Improper configuration of the Federated Identity Credentials for Microsoft Entra issuer.
- Incorrect token generation method being used.

#### Step-by-Step Resolution Strategies:
1. **Use App-Only Access Token:**
   - Generate an app-only access token during a client credentials flow.
   - Replace the user-delegated access token with the app-only access token in your implementation.
   
2. **Verify Issuer Configuration:**
   - Review the configuration settings for the Federated Identity Credentials for Microsoft Entra issuer.
   - Ensure that only app-only tokens are allowed for this specific issuer.

3. **Update Token Generation Flow:**
   - If necessary, update your token generation flow to ensure that app-only access tokens are used for the Microsoft Entra issuer.

#### Additional Notes or Considerations:
- Keep in mind that Federated Identity Credentials for Microsoft Entra may have specific requirements regarding token types.
- Review any relevant documentation or guidelines provided by Microsoft for handling token authentication with the Microsoft Entra issuer.

#### Documentation for Guidance:
- [Microsoft Identity Platform Documentation](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow)
- [Microsoft Identity Platform Error Codes](https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-aadsts-error-codes)

By following these steps and guidelines, you should be able to troubleshoot and resolve the AADSTS700229 error code related to the ForbiddenTokenType issue effectively.