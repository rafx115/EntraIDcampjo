# AADSTS120012: PasswordChangeNeedsToHappenOnPrem


## Introduction

This guide will help resolve issues related to
passwordchangeneedstohappenonprem.


## Prerequisites


* Access to the Azure AD portal with administrator privileges.

* The user must have already set up MFA.


## Steps to Resolve


### Step 1: Initial Actions

1. Log in to the Azure AD portal.
2. Navigate to the "Users" section.
3. Select the affected user.
4. Perform necessary actions as described for the error.


### Step 2: Verify MFA Settings

1. Ensure that the user has MFA configured.
2. If necessary, guide the user through the MFA setup process.


## Troubleshooting


* Check for any Azure AD conditional access policies that might be affecting the

  MFA process.

* Consider any additional security measures that might be in place.


## Additional Notes


* Refer to the

  [Azure AD 
documentation](https://learn.microsoft.com/en-us/azure/active-directory/)
  for more details.


## Troubleshooting Steps

Troubleshooting steps could not be generated due to an error.


## Troubleshooting Steps

Troubleshooting steps could not be generated due to an error.


## Troubleshooting Steps

Error Code: AADSTS120012\
Description: PasswordChangeNeedsToHappenOnPrem

**Initial Diagnostic Steps** 

1. Confirm the specific user account experiencing the issue.
2. Verify if the user's password has expired on the on-premises Active
   Directory.
3. Check if there are any recent password policy changes in the on-premises
   environment that might be causing the issue.
4. Ensure that the user has correct permissions to change their password both
   on-premises and in Azure Active Directory (AAD).

**Common Issues that Cause this Error** 

1. Password expiration on the on-premises Active Directory without
   synchronization to Azure AD.
2. Incorrect password sync configuration between on-premises AD and Azure AD
   Connect.
3. User lacks the necessary permissions to change passwords in both
   environments.
4. Mismatched password policies between on-premises AD and Azure AD.

**Step-by-Step Resolution Strategies** 

1. **Synchronize Password Changes**: Ensure that password changes on-premises
   are synchronized with Azure AD in a timely manner.

2. **Verify Password Expiration**: Check the password expiration status for the
   user on the on-premises Active Directory. If the password has expired, prompt
   the user to change it on-premises first.

3. **Check Azure AD Connect Configuration**: Confirm that Azure AD Connect is
   correctly configured to sync password changes from on-premises to Azure AD.
   Review sync cycles and any recent changes in configuration.

4. **User Permissions**: Ensure that the user has sufficient permissions to
   change their password in both on-premises AD and Azure AD. If needed, grant
   necessary permissions to the user or use a privileged account for changing
   the password.

5. **Password Policy Alignment**: Ensure that the password policies between
   on-premises AD and Azure AD are aligned to prevent conflicts and allow
   seamless password changes.

**Additional Notes or Considerations**


* If the issue persists, consider verifying the health and status of Azure AD

  Connect for any errors or sync issues.

* Encourage users to update their passwords regularly to avoid password

  expiry-related problems.

* Implementing self-service password reset solutions can empower users to handle

  password changes without IT intervention.

By following these troubleshooting steps, you should be able to address the
error code AADSTS120012 with the description "PasswordChangeNeedsToHappenOnPrem"
effectively.