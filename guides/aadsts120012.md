
# AADSTS120012: PasswordChangeNeedsToHappenOnPrem


## Troubleshooting Steps
Error code AADSTS120012 with the description "PasswordChangeNeedsToHappenOnPrem" often indicates a synchronization issue between the on-premises Active Directory and Azure Active Directory (Azure AD) regarding password changes. Resolving this error requires understanding the potential causes and following a systematic troubleshooting approach. Below is a detailed troubleshooting guide to address this error:

### Initial Diagnostic Steps:
1. **Confirm the Source of the Issue**: Determine if the user is trying to change a password in Azure AD but the policy requires the password change to occur on-premises.
   
2. **Check Directory Synchronization**: Verify that the Azure AD Connect tool is running and synchronizing changes from on-premises Active Directory to Azure AD.

3. **Review Password Policies**: Ensure that password policies are consistent between on-premises and Azure AD to prevent conflicts during password changes.

4. **Analyze Azure AD Sign-In Logs**: Use Azure AD logs to identify any specific errors or patterns related to the password change issue.

### Common Issues Causing This Error:
- Password writeback feature might not be enabled in Azure AD Connect.
- Inconsistent password policies between on-premises AD and Azure AD.
- Synchronization issues leading to password change conflicts.
- Incorrect user configuration or group assignment settings.

### Step-by-Step Resolution Strategies:
1. **Enable Password Writeback**:
   - If password writeback is not enabled, enable it in Azure AD Connect to allow password changes to sync from Azure AD to on-premises AD.

2. **Verify Password Policies**:
   - Ensure that password policies, including complexity and expiration settings, match between on-premises AD and Azure AD.

3. **Force a Manual Sync**:
   - Trigger a manual synchronization between on-premises AD and Azure AD to ensure that the latest changes are reflected.

4. **Update User Attributes**:
   - Check and update user attributes in Azure AD to reflect the correct settings for password changes.

### Additional Notes/Considerations:
- Ensure that users are aware of the password change requirements to prevent unnecessary errors.
- Regularly monitor synchronization processes to identify and address any potential issues proactively.
- Utilize Azure AD self-service password reset options to empower users to manage their passwords effectively.

### Documentation:
- **Azure AD Connect documentation**: [Microsoft Azure AD Connect documentation](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-roadmap)
- **Azure AD troubleshooting guide**: [Troubleshoot password writeback issues in Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-sspr-writeback#troubleshoot-password-writeback-issues)

By following these steps and guidelines, you should be able to diagnose and resolve the error code AADSTS120012 related to the "PasswordChangeNeedsToHappenOnPrem" issue effectively.