# AADSTS700011: UnauthorizedClientAppNotFoundInOrgIdTenant - Application with identifier {appIdentifier} was not found in the directory. A client application requested a token from your tenant, but the client app doesn't exist in your tenant, so the call failed.


## Troubleshooting Steps
Certainly! Below is a detailed troubleshooting guide for the error code AADSTS700011 with the description "UnauthorizedClientAppNotFoundInOrgIdTenant".

### Troubleshooting Guide for AADSTS700011

#### Initial Diagnostic Steps
1. **Check the Error Message**: Verify the exact error message and note the `appIdentifier`. This identifier will be crucial in diagnosing the issue.
2. **Reproduce the Error**: Attempt to reproduce the error with the same settings or state to ensure it’s not an isolated incident.
3. **Review Logs**: Check any relevant logs in your application and Azure portal, especially at the time the error was generated.
4. **Confirm App Registration**: Visit the Azure AD portal and check if the application identified by `{appIdentifier}` is registered in your tenant.

#### Common Issues That Cause This Error
1. **Application Not Registered**: The application requesting the token has not been registered in your Azure AD tenant.
2. **Incorrect Tenant**: The token request is being made to the wrong Azure AD tenant.
3. **Misconfigured Identifier**: The `appIdentifier` provided in the request may be incorrect or not match the registered application.
4. **Deleted Application**: An application that previously existed has been deleted or removed from your tenant.
5. **Wrong Client ID/Secret**: The application may be using the wrong Client ID or Client Secret.

#### Step-by-Step Resolution Strategies
1. **Verify Application Registration**:
   - Go to the **Azure Portal**: https://portal.azure.com
   - Navigate to **Azure Active Directory** > **App registrations**.
   - Search for your application using `{appIdentifier}`.
   - If not found, you need to register the application in the tenant.

2. **Register the Application (if not found)**:
   - Click on **New registration**.
   - Fill in the details, setting the appropriate **Redirect URI** and **API permissions**.
   - Ensure the **App ID URI** is set correctly if applicable.

3. **Confirm Access to the Correct Tenant**:
   - Ensure you are using the correct Tenant ID and not making requests to a different tenant.
   - Use the correct OAuth2 endpoint associated with your tenant.

4. **Double-Check Configuration**:
   - Verify that your application’s configuration (Client ID, Client Secret, Redirect URI) is correctly set in your application’s code or configuration file.

5. **Re-check API Permissions**:
   - Ensure the registered app has the required permissions to access any APIs that your application intends to call. This can be done in the **API permissions** section of the app registration.

6. **Consult Azure AD Logs**:
   - Under **Monitoring**, review the Audit logs and sign-in logs which could provide insights into whether requests are hitting the correct endpoint and what responses are returning.

#### Additional Notes or Considerations
- Ensure your application is properly set up for the type of authentication flow you are using (e.g., authorization code, client credentials).
- If you recently modified application settings, note that it may take some time for the changes to propagate.
- If your application is multi-tenant, ensure that it is set up correctly to allow users from other tenants.

#### Documentation Where Steps Can Be Found
- [App Registrations in Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app)
- [Azure Active Directory Sign-In Logs](https://docs.microsoft.com/en-us/azure/active-directory/reports-monitoring/concept-sign-ins)
- [Configure Permissions for Azure AD Applications](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-permissions-and-consent)

#### Test Documentation Reachability
To ensure that the above documentation links are reachable, you can try visiting each link directly in your web browser. If you're unable to access any of the links, consider checking your network connection or any firewall settings that might restrict access to Microsoft services.

#### Advice for Data Collection
- **Error Logs**: Capture error message details, request IDs, timestamps, and any other relevant information when the error occurs.
- **Azure Watch Logs**: Enable logging for your Azure resources if not already done to accumulate more diagnostic data.
- **PowerShell Commands**: You can use Azure PowerShell commands to list apps, troubleshoot and manage configurations:
    - Example: `Get-AzureADApplication -SearchString "YourAppName"` can be used to check if the application exists in the tenant.

By following this guide, you should be able to diagnose and resolve the AADSTS700011 error effectively. If issues persist, consider reaching out to Microsoft support for specialized assistance.