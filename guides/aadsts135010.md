# AADSTS135010: KeyNotFound


## Troubleshooting Steps
### Troubleshooting Guide for Error Code AADSTS135010: KeyNotFound

#### Initial Diagnostic Steps
1. **Identify the Context**: Determine when the error is occurring. Is it during sign-in, accessing specific resources, or during an application registration?
2. **Check User Details**: Collect information such as the user's account status (is the account active, or has it been disabled?), the application they are trying to access, and any relevant tenant information.
3. **Review Application Logs**: Check any application or server logs to capture the exact sequence of events leading to the error.
4. **Examine Application Configuration**: Look into the configurations of Azure AD applications, particularly in relation to keys and secrets.

#### Common Issues That Cause This Error
- Missing or deleted application keys/secrets in the Azure portal.
- Incorrectly configured application registrations in Azure AD.
- Issues with user permissions or roles, particularly in accessing specific resources.
- Domain issues if you are running multiple tenants or applications linked to different domains.
- Expired keys/secrets that are no longer valid.

#### Step-by-Step Resolution Strategies
1. **Verify Key Existence**:
   - Go to the Azure portal.
   - Navigate to `Azure Active Directory` > `App registrations`.
   - Find your application and check the **Certificates & secrets** section to ensure that the necessary keys/secrets are present.

2. **Check Key Validity**:
   - Ensure that any keys or secrets in use have not expired. If they have, create a new one and update the app configuration accordingly.

3. **Correct Application Registration Configuration**:
   - Ensure your application is correctly configured under `Authentication` settings.
   - Verify that redirect URIs, and any other settings related to OAuth2 or OpenID Connect are accurately set up.

4. **Assess Permissions**:
   - Make sure that the user or application has been granted the necessary permissions to access the resources.
   - Check the roles assigned to the user/application in Azure AD and ensure they have sufficient rights.

5. **Clear Cache and Retry Authentication**:
   - In some cases, local or session caches could interfere with authentication attempts. Clear your browser cache or try incognito mode to initiate a fresh session.

6. **Re-test the Application**: After making changes, attempt to perform the action that previously resulted in the error.

#### Additional Notes or Considerations
- **Service Status**: Check Azure Service Health to see if there are any ongoing issues that might affect Azure AD and its functionalities.
- **Environment Variability**: If you are testing in multiple environments (development, staging, production), ensure that the configurations are consistent across each.
- **Rate Limits**: Ensure that you are not exceeding Azure APIs' rate limits by checking Azure's throttling policies.

#### Documentation
For detailed documentation, consider the following resources that can be accessed easily:
- [Microsoft Identity platform documentation](https://docs.microsoft.com/en-us/azure/active-directory/develop/)
- [App registrations in Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app)
- [Understanding error codes](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-error-codes)

You can verify these links are reachable by clicking on them or copying and pasting them into your browser.

#### Advice for Data Collection
- **User Details**: Document the exact user details encountering the error (e.g., email, account status).
- **Timestamp of Issues**: Note the timestamps when issues occur for tracing logs.
- **Error Logs**: Collect detailed error logs from both client-side (browser app, server log) and Azure AD logs.
- **Application Configuration Details**: Document existing application settings and any changes made during troubleshooting.
  
Following these guidelines should aid in effectively addressing the AADSTS135010 error and improving application authentication processes within Azure Active Directory.