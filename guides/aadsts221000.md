
# AADSTS221000: DeviceOnlyTokensNotSupportedByResource - The resource isn't configured to accept device-only tokens.


## Introduction

This guide will help resolve issues related to
deviceonlytokensnotsupportedbyresource - the resource isn't configured to accept

device-only tokens..


## Prerequisites


* Access to the Azure AD portal with administrator privileges.

* The user must have already set up MFA.


## Steps to Resolve


### Step 1: Initial Actions

1. Log in to the Azure AD portal.
2. Navigate to the "Users" section.
3. Select the affected user.
4. Perform necessary actions as described for the error.


### Step 2: Verify MFA Settings

1. Ensure that the user has MFA configured.
2. If necessary, guide the user through the MFA setup process.


## Troubleshooting


* Check for any Azure AD conditional access policies that might be affecting the

  MFA process.

* Consider any additional security measures that might be in place.


## Additional Notes


* Refer to the

  [Azure AD 
documentation](https://learn.microsoft.com/en-us/azure/active-directory/)
  for more details.


## Troubleshooting Steps

Troubleshooting steps could not be generated due to an error.


## Troubleshooting Steps

Troubleshooting steps could not be generated due to an error.


## Troubleshooting Steps


### Troubleshooting Guide for Error Code AADSTS221000: DeviceOnlyTokensNotSupportedByResource


#### Initial Diagnostic Steps:

1. **Verify the Error Message**: Ensure the full error message reads
   "DeviceOnlyTokensNotSupportedByResource - The resource isn't configured to

   accept device-only tokens."
2. **Check Authentication Flow**: Understand the authentication flow being used,
   such as OAuth 2.0 or OpenID Connect, and identify the resource that is
   causing the issue.
3. **Review Azure AD Integration**: If using Azure AD, check the configuration
   settings and permissions of the resource.


#### Common Issues:


* **Misconfigured Resource**: The resource application might not be set up to

  accept device-only tokens.

* **Incorrect Token Type**: Device-only tokens are not supported by some

  applications or services.


#### Step-by-Step Resolution Strategies:

1. **Verify Resource Configuration**:
   * Access the Azure portal or the configuration settings of the resource

     application.
   * Ensure that the resource is configured to accept device-only tokens.

2. **Update Resource Configuration**:

   * If the resource does not support device-only tokens, update the

     configuration.
   * Enable device-only token support in the resource settings.

3. **Check Token Type**:

   * If device-only tokens are not compatible with the resource, consider

     switching to another token type that the resource supports.
   * Review the resource's documentation or contact the resource owner for

     guidance on the supported token types.

4. **Re-Authorize the Device**:
   * Re-initiate the authentication flow from the device to generate a token

     that the resource can accept.
   * Ensure the device and the resource are properly authorized and

     authenticated.


#### Additional Notes or Considerations:


* **Documentation and Support**: Consult the official documentation of the

  resource application or service for specific guidance on token types
  supported.

* **Token Renewal**: If changing the token type, ensure proper mechanisms are in

  place for token renewal and management.

* **Permissions and Scopes**: Confirm that the device has the necessary

  permissions and scopes to access the resource.

* **Logs and Monitoring**: Monitor logs for further details on the error and

  perform additional troubleshooting as needed.

By following these steps, you should be able to resolve the error code
AADSTS221000 related to DeviceOnlyTokensNotSupportedByResource effectively. If
further assistance is required, consider reaching out to the resource provider's
support team for tailored help.