# AADSTS135011: Device used during the authentication is disabled.


## Troubleshooting Steps
Error code AADSTS135011 indicates that the device used during the authentication process is disabled in Azure Active Directory (Azure AD). This error affects users attempting to access resources that require device authentication. Below is a comprehensive troubleshooting guide to address this issue.

### Initial Diagnostic Steps

1. **Check Error Details**: Review the complete error message and any accompanying error codes. This may provide additional context.
2. **Identify the Device**: Make a note of the device being used (name, operating system, device ID) and the user attempting to log in.
3. **Check the Azure AD Portal**: Sign in to the Azure portal (portal.azure.com) and go to Azure Active Directory to check for any device management policies that might affect the device.

### Common Issues That Cause This Error

- The device is explicitly disabled in Azure AD.
- The user's account does not have the necessary permissions to use the device for authentication.
- Device compliance policies (intended for mobile device management) are not met.
- Issues with the user's account (e.g. suspended, deleted).
- Intune or another MDM solution has marked the device as non-compliant.

### Step-by-Step Resolution Strategies

1. **Verify Device Enrollment**:
   - Go to Azure Active Directory > Devices > All devices.
   - Search for the specific device to confirm whether it appears in the list and check its status.

2. **Re-enable the Device**:
   - If the device is disabled, re-enable it by selecting the device and choosing the "Enable" option from the menu.

3. **Check User Permissions**:
   - Verify that the user account has permissions to utilize the device for sign-in. Check the user's group memberships and any conditional access policies affecting the user.

4. **Review Conditional Access Policies**:
   - Navigate to Azure Active Directory > Security > Conditional Access.
   - Review all policies to see if any might restrict access based on device compliance or other criteria impacting the user/device pairing.

5. **Device Compliance Check** (if applicable):
   - If using a Mobile Device Management (MDM) solution like Intune, check the compliance policies there.
   - Ensure that the device complies with organizational security policies.

6. **User Account Status**:
   - Check if the user's account is in good standing. Confirm that it is not disabled, locked, or unusable.

7. **Device Registration**:
   - In case the device needs to be re-registered, go to Azure Active Directory > Devices > Device settings and configure the necessary registration settings for users.

8. **Support Ticket**:
   - If further issues arise, consider opening a support ticket with Microsoft for tailored guidance.

### Additional Notes or Considerations

- **Logging and Auditing**: Enable logging in Azure AD to capture more information about failed sign-in attempts which could help in diagnosing further.
- **Multi-Factor Authentication**: If MFA is enabled, ensure the device being used complies with any MFA prompt requirements.
  
### Documentation for Guidance

- **Azure AD Device Management Overview**: [Microsoft Documentation](https://learn.microsoft.com/en-us/azure/active-directory/devices/devicemanagement)
- **Troubleshoot Device Registration**: [Microsoft Documentation](https://learn.microsoft.com/en-us/azure/active-directory/devices/troubleshoot-device-registration)
- **Conditional Access Documentation**: [Microsoft Documentation](https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/overview)

### Testing the Documentation

You can access the above links to verify they are reachable. Each link should open the corresponding Microsoft documentation pertaining to Azure AD device management and troubleshooting.

### Advice for Data Collection

- **Event Logs**: Collect relevant event logs from Azure AD surrounding the sign-in attempt which failed along with timestamps.
- **User and Device Information**: Gather information such as user name, device ID, and the specific authentication methods attempted.
- **Screenshots**: Capture screenshots of error messages and console logs to provide context when seeking additional support or opening a ticket with Microsoft.

This structured approach should provide a clear path through the troubleshooting process for error AADSTS135011, leading to effective resolution of issues related to disabled devices during authentication.