
# AADSTS650054: The application asked for permissions to access a resource that has been removed or is no longer available. Make sure that all resources the app is calling are present in the tenant you're operating in.


## Troubleshooting Steps
Certainly! The AADSTS650054 error code is an indication that an application has requested permissions to access a resource that is no longer available or has been removed. Below is a detailed troubleshooting guide that can help you address this issue effectively.

### Initial Diagnostic Steps:
1. **Identify the Application**: Determine which application is generating this error. Check the logs or the user reports.

2. **Version Control**: Ensure the application has not changed recently in terms of scope or endpoints.

3. **Tenant Check**: Confirm that you are operating in the correct Azure Active Directory (AAD) tenant.

4. **Error Context**: Gather context for when the error occurs. Is it during a login attempt, data fetching, etc.?

5. **Examine Permissions**: Check the permissions that the application is trying to request and if they match those configured in the Azure portal.

### Common Issues that Cause this Error:
- **Resource Deletion**: The resource (e.g., API, service, or application) that the application is trying to access has been deleted or moved.
- **Scope Configuration**: The application may be requesting permissions (scopes) that are no longer valid because the resource has changed or the API has been updated.
- **Misconfigured App Registration**: The Azure app registration might not point to the correct endpoints or resource identifiers.
- **Tenant Misalignment**: The application may be running in the wrong tenant where the resource doesn't exist.
- **Expired or Revoked Permissions**: The user or service principal might not have permission if it has been revoked.

### Step-by-Step Resolution Strategies:
1. **Verify Resource Availability**: 
   - Log into the Azure portal and navigate to the resource (e.g., Azure AD, APIs) the application is trying to access.
   - Confirm that it is present and properly configured.

2. **Check App Registration**:
   - In the Azure portal, go to "Azure Active Directory" > "App registrations".
   - Select the application that is generating the error.
   - Verify that all necessary API permissions are granted and are currently valid.

3. **Update Scopes**:
   - If the scopes requested by the application do not match what is available for the resource, ensure the application's code requests the correct scopes.
   - Make any necessary updates to the applicationâ€™s configuration.

4. **Check API Settings**: 
   - If the application is calling a custom API, ensure that the API is configured to accept requests from the application.
   - Check the resource's access control settings.

5. **Verify Tenant**:
   - Switch tenants in your Azure environment if needed and check if the resource and permissions exist in the target tenant.

6. **Consult Logs**:
   - Check Azure logs and any monitoring tools for more detailed information about the error.
   - Understand where the application is failing.

7. **Test Changes**:
   - After making changes, retest the application to see if the error persists.

### Additional Notes or Considerations:
- Regularly review app registration settings to ensure they remain accurate and relevant.
- Ensure that you have appropriate logging within the application to easily troubleshoot future issues.
- In a development environment, check if changes were made to the development resources that could impact production.

### Documentation for Guidance:
- [Manage app registrations in Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app)
- [Configure permissions for an app](https://docs.microsoft.com/en-us/azure/active-directory/develop/scenario-api-permissions-overview)
- [Azure Active Directory error codes](https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-aad-error-codes)

### Test Documentation Accessibility:
You can test the links provided by clicking on them or pasting them into a web browser to ensure that the documentation is accessible.

### Advice for Data Collection:
- Record the exact error message and time of occurrence.
- Capture user session details if possible.
- Monitor the responses from the resource the application calls for any additional error codes.
- Document any recent changes made in Azure, either in the app registrations or in the resources.

With this troubleshooting guide, you should be able to resolve the AADSTS650054 error effectively. If issues persist, consider reaching out to Microsoft support for additional assistance.