
# AADSTS501461: AcceptMappedClaims is only supported for a token audience matching the application GUID or an audience within the tenant's verified domains. Either change the resource identifier, or use an application-specific signing key.


## Troubleshooting Steps
### Error Code AADSTS501461 - Troubleshooting Guide

**Description**: AcceptMappedClaims is only supported for a token audience matching the application GUID or an audience within the tenant's verified domains. Either change the resource identifier, or use an application-specific signing key.

#### Initial Diagnostic Steps:
1. **Identify the Resource Identifier**: Check the token audience and verify if it matches the application GUID or belongs to the tenant's verified domains.
2. **Review Application Configuration**: Ensure that the application's settings related to token audience and signing keys are correctly configured.
3. **Check Tenant's Verified Domains**: Verify the list of verified domains in your tenant to see if the audience belongs to one of them.

#### Common Issues:
- Incorrect resource identifier in the token audience.
- Mismatch between the application GUID and the token audience.
- Improper use of signing keys.
- Insufficient permissions or misconfigured settings in Azure AD.

#### Step-by-step Resolution Strategies:
1. **Update Resource Identifier**:
   - Change the resource identifier in the application settings to match the application GUID or a verified domain within the tenant.

2. **Use Application-Specific Signing Key**:
   - Configure the application to use an application-specific signing key for token validation.
  
3. **Grant Necessary Permissions**:
   - Ensure the application has the required permissions and access policies configured in Azure AD.

4. **Review Token Configuration**:
   - Check the token configuration to ensure that the token audience and signing keys align with the requirements.

#### Additional Notes or Considerations:
- Make sure to validate the changes made in the Azure AD application to avoid any unintended side effects on the authentication flow.
- Consider consulting Azure AD documentation or seeking assistance from Microsoft support for complex or specific scenarios.

#### Documentation:
- [Microsoft Azure AD Error Codes Reference](https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-aadsts-error-codes)
- [Azure AD Application Management Documentation](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-configure-app-access-web-apis)

By following these steps and guidelines, you should be able to troubleshoot and resolve the AADSTS501461 error effectively.