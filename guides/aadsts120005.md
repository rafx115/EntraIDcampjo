
# AADSTS120005: PasswordChangeOnPremSuccessCloudFail


## Troubleshooting Steps
**Troubleshooting Guide for Error Code AADSTS120005 - PasswordChangeOnPremSuccessCloudFail**

**Description:**
AADSTS120005 error code indicates that a user has successfully changed their password on-premises, but the password change has failed in the cloud. This typically occurs in scenarios where there is a synchronization issue between the on-premises Active Directory and Azure Active Directory.

**Initial Diagnostic Steps:**
1. Verify if the user's password was indeed changed on-premises successfully.
2. Check the synchronization status between the on-premises Active Directory and Azure AD using Azure AD Connect Health or similar tools.
3. Confirm the user's login attempts and password change logs in both on-premises and Azure AD environments.

**Common Issues that Cause this Error:**
1. Synchronization issues with Azure AD Connect.
2. Incorrect configurations or settings in Azure AD Connect.
3. Password policies mismatch between on-premises Active Directory and Azure AD.
4. Network connectivity issues affecting synchronization.
5. User account-related issues such as account lockouts or expired passwords.

**Step-by-Step Resolution Strategies:**
1. **Confirm Successful Password Change:**
    - Verify that the user's password was successfully updated in the on-premises Active Directory.

2. **Check Synchronization Status:**
    - Use Azure AD Connect Health tool to monitor synchronization status.
    - Check for any synchronization errors or warnings that might indicate a problem.

3. **Review Azure AD Connect Configuration:**
    - Check Azure AD Connect configuration settings to ensure they are correctly configured.
    - Verify the sync schedule and make sure it is running as expected.

4. **Resolve Password Policy Mismatch:**
    - Ensure that password policies are consistent between on-premises AD and Azure AD.
    - Match the password expiration settings, complexity requirements, and other policies.

5. **Troubleshoot Network Connectivity:**
    - Check for any network issues that might be affecting connectivity between on-premises AD and Azure AD.
    - Ensure firewall rules are correctly configured to allow synchronization traffic.

6. **Reset User's Password in Azure AD:**
    - As a workaround, reset the user's password in Azure AD to force synchronization.

**Additional Notes or Considerations:**
- It's important to investigate and resolve the root cause of the synchronization failure to prevent future occurrences.
- Regularly monitor synchronization status to catch any issues early.

**Documentation for Guidance:**
- Microsoft Azure Active Directory documentation provides detailed guides on configuring and troubleshooting issues related to Azure AD Connect and password synchronization.
- Here is a link to the Azure AD Connect troubleshooting guide: [Azure AD Connect troubleshooting documentation](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/tshoot-connect-sync-errors)