# AADSTS120004: PasswordChangeOnPremComplexity

## Introduction
This guide will help resolve issues related to passwordchangeonpremcomplexity.

## Prerequisites
- Access to the Azure AD portal with administrator privileges.
- The user must have already set up MFA.

## Steps to Resolve

### Step 1: Initial Actions
1. Log in to the Azure AD portal.
2. Navigate to the "Users" section.
3. Select the affected user.
4. Perform necessary actions as described for the error.

### Step 2: Verify MFA Settings
1. Ensure that the user has MFA configured.
2. If necessary, guide the user through the MFA setup process.

## Troubleshooting
- Check for any Azure AD conditional access policies that might be affecting the MFA process.
- Consider any additional security measures that might be in place.

## Additional Notes
- Refer to the [Azure AD documentation](https://learn.microsoft.com/en-us/azure/active-directory/) for more details.


## Troubleshooting Steps
Troubleshooting steps could not be generated due to an error.

## Troubleshooting Steps
Troubleshooting steps could not be generated due to an error.

## Troubleshooting Steps
Error Code: AADSTS120004 (PasswordChangeOnPremComplexity)

**Initial Diagnostic Steps:**
1. **Confirm the Error:** Ensure that the error code displayed is indeed AADSTS120004 â€“ PasswordChangeOnPremComplexity.
2. **Check User Activity:** Verify if the user was attempting to change their password when the error occurred.
3. **Review Password Complexity Requirements:** Assess if the password being changed meets the complexity requirements set by the on-premises Active Directory.

**Common Issues that Cause this Error:**
1. **Password Complexity Rules:** The password being changed does not meet the complexity requirements enforced by the on-premises Active Directory.
2. **Sync Issues:** Inconsistencies between Azure AD and the on-premises Active Directory may cause this error.
3. **Lack of Synchronization:** Failure in syncing new password policies or changes from on-premises Active Directory to Azure AD can lead to this error.

**Step-by-Step Resolution Strategies:**
1. **Check Password Complexity Policy:**
   - Verify the on-premises Active Directory password complexity policy requirements.
   - Ensure the user's new password meets the complexity rules (e.g., length, complexity, history).

2. **Synchronize Password Policies:**
   - Trigger a manual sync between Azure AD and the on-premises Active Directory to ensure consistency in password policies.
   - Use tools like Azure AD Connect to force synchronization if needed.

3. **Reset the Password via On-Premises Tools:**
   - Have the user reset their password using on-premises tools like Active Directory Users and Computers or web portals linked to the on-premises AD.
   - Check if the user account is not locked out or disabled in the on-premises AD.

4. **Monitor Synchronization Logs:**
   - Review synchronization logs for any errors or warnings that could indicate a problem with syncing password policies.
   - Address any synchronization issues that may be causing the password complexity mismatch.

**Additional Notes or Considerations:**
- It's essential to ensure that Azure AD and the on-premises Active Directory are properly synchronized to prevent such errors.
- Regularly update and align password complexity policies between these environments to avoid inconsistencies.
- Provide training to users on choosing complex passwords to meet security requirements.

By following these troubleshooting steps carefully, you should be able to resolve the error code AADSTS120004 (PasswordChangeOnPremComplexity) effectively.