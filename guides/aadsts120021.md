
# AADSTS120021: PartnerServiceSsprInternalServiceError


## Troubleshooting Steps
Certainly! Error code AADSTS120021 with the description "PartnerServiceSsprInternalServiceError" typically indicates an internal service error related to self-service password reset (SSPR) in Microsoft Azure Active Directory (AAD). Below is a comprehensive troubleshooting guide:

## Troubleshooting Guide for AADSTS120021

### Initial Diagnostic Steps

1. **Confirm Error Context:**
   - Identify when and how the error occurs. Is it consistently reproducible with certain users or in specific conditions? Knowing this can help isolate the issue.

2. **Check Service Health:**
   - Visit the [Azure Status page](https://status.azure.com/en-us/status) to check if there are any ongoing issues or outages affecting Azure services.

3. **Review User Account Status:**
   - Ensure the user account experiencing the error is active and not locked out or disabled.

4. **Identify Recent Changes:**
   - Look for any recent changes in policies or configurations in AAD, particularly related to password reset settings.

### Common Issues That Cause This Error

1. **Service Outages:**
   - Temporary service disruptions or outages in Azure AD services, especially affecting the self-service password reset (SSPR) feature.

2. **Configuration Issues:**
   - Incorrect settings in AAD related to SSPR, such as authentication methods or user group permissions.

3. **User Account Issues:**
   - The user may be part of a conditional access policy that restricts SSPR usage, or there could be issues with how the user is registered for password reset.

4. **Tenant-Specific Issues:**
   - Occasionally, certain tenants may experience unique issues due to configuration or updates.

### Step-by-Step Resolution Strategies

#### Step 1: Confirm Service Availability
- Go to the Azure Status page and check for any ongoing incidents that might affect password reset services. This step can rule out external factors.

#### Step 2: Validate SSPR Configuration
- Log in to the Azure portal and navigate to Azure Active Directory > Users > User settings.
- Under "Self-service password reset," ensure that:
  - The feature is enabled.
  - The registration methods for password reset (email, phone, etc.) are correctly configured.

#### Step 3: Review User Registration
- Verify that the user experiencing the error is properly registered for SSPR. This can be checked in Azure AD under the user profile.

#### Step 4: Check Conditional Access Policies
- Navigate to Azure Active Directory > Security > Conditional Access.
- Review any policies that might restrict access to SSPR or require specific authentication.

#### Step 5: Test with Different Users
- Sometimes, the issue may only affect specific users. Test the password reset process with different user accounts to identify if the issue is user-specific.

#### Step 6: Increase Logging Levels
- Enable more verbose logging in Azure to gather more information about the failed attempts for those experiencing the error.

#### Step 7: Contact Microsoft Support
- If the error persists after reviewing and applying the above steps, consider reaching out to Microsoft support for further assistance. Provide detailed information about troubleshooting efforts already taken.

### Additional Notes or Considerations

- **Security Implications:** Be cautious when adjusting settings related to SSPR, as these can affect the security posture of the organization.
- **User Training:** Users may benefit from training or documentation on how to use SSPR effectively.
- **Service Limits:** Be aware of any service limits or quotas that apply to SSPR usage.

### Documentation for Guidance

- Refer to Microsoft’s official documentation for SSPR: 
  - [Self-service password reset in Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/authentication/howto-authentication-selveservice-password-reset).
- For common Azure AD error codes and their meanings:
  - [Azure AD Error Codes Reference](https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-aadsts-error-codes).

#### Testing Documentation Reachability
- You can validate documentation by clicking any of the links provided above and ensuring they resolve correctly.

### Advice for Data Collection

- **Error Logs:** Take note of any error messages and codes shown to users attempting to reset their passwords.
- **Engagement Metrics:** Collect data on how many users are encountering the error and their user groups.
- **Screenshots:** If possible, take screenshots of the error message and the user's experience to provide clarity when reaching out to support.
- **Environment Details:** Document the Azure AD tenant specifications, such as the domain, any custom configurations, and the version of Azure AD in use.

By following this guide, you should be able to systematically identify and resolve the AADSTS120021 error effectively.